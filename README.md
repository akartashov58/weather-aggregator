# weather-aggregator

## Микросервис погоды, который:
•	запрашивает данные о погоде с 100 разных источников (разного формата)

•	адаптирует их к единому формату

•	агрегирует

•	сохраняет как сырые, так и обработанные данные в базу данных

•	и возвращает агрегированные результаты по API

## REST:

1. GET /weather/aggregate 

Выполняет
- Асинхронно запрашивает данные с 100 источников (/source/{id}). (источники замоканы)
      
Форматы данных: данные от разных источников могут приходить в таких вариантах:

Пример 1: { "temp": 20.1, "hum": 55 }

Пример 2: { "temperature": "21.7", "humidity": "58" }

Пример 3: { "weather": { "t": 22.5, "h": 53.3 } }

- Адаптирует полученные данные к общему виду:

class WeatherData {
  double temperature;
  double humidity;
}

- Сохраняет в БД:

Сырые (оригинальные) данные от источника.

Обработанные данные после адаптации.

- Усредняет полученные данные

- Возвращает агрегированный ответ вида:

{
"averageTemperature": double,
"averageHumidity": double
}

## Таблицы в БД:
Используется H2
•	raw_weather_data
| id | source_id | payload (TEXT) | timestamp |

•	normalized_weather_data
| id | source_id | temperature | humidity | timestamp |






